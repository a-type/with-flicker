(this["webpackJsonpwith-flicker"]=this["webpackJsonpwith-flicker"]||[]).push([[0],{76:function(e,t,a){e.exports=a(88)},81:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(81),a(24)),s=a(51),l=a(22),u=a(116),p=a(118),f=a(128),d=a(127),h=a(121),m=a(131),g=a(3),b=a(11),v=a(27),j=a.n(v),x=a(37),O=a(53),w=a(50);function k(e){return E.apply(this,arguments)}function E(){return(E=Object(x.a)(j.a.mark((function e(t){var a,n,r,o,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.text,n=t.page,r=void 0===n?1:n,e.next=3,fetch("https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=".concat("d7e1b7799fca358f597261fdc6072cf4","&text=").concat(a,"&page=").concat(r,"&per_page=50&format=json&nojsoncallback=1&safe_search=1"));case 3:if((o=e.sent).ok){e.next=10;break}return e.next=7,o.text();case 7:throw c=e.sent,console.error("Flickr API error",o.status,c),new Error("Bad response from Flickr API");case 10:return e.next=12,o.json();case 12:return i=e.sent,e.abrupt("return",i.photos);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=Object(w.b)({name:"search",initialState:{filter:"",fetching:!1,results:{photos:[],latestPage:0,pageCount:0},focusedPhotoId:null,initial:!0,error:null},reducers:{beginSearch:function(e,t){e.filter=t.payload.value,e.results={photos:[],latestPage:0,pageCount:0},e.fetching=!0,e.initial=!1,e.error=null},completeSearch:function(e,t){e.results={latestPage:t.payload.page,pageCount:t.payload.pageCount,photos:[].concat(Object(O.a)(e.results.photos),Object(O.a)(t.payload.photos))},e.fetching=!1},beginPageFetch:function(e){e.fetching=!0,e.error=null},focusPhoto:function(e,t){e.focusedPhotoId=t.payload.id},closeFocusedPhoto:function(e){e.focusedPhotoId=null},fetchFailed:function(e,t){e.error=t.payload.error,e.fetching=!1}}}),C=y.actions,I=C.focusPhoto,N=C.closeFocusedPhoto,S=function(e){return e.photos.filter},P=function(e){var t;return null!==(t=e.photos.results.photos)&&void 0!==t?t:[]},F=function(e){return e.photos.results.latestPage},R=function(e){return e.photos.results.latestPage<e.photos.results.pageCount},B=function(e){return e.photos.fetching},T=function(e){var t,a=e.photos.focusedPhotoId;return null!==(t=e.photos.results.photos.find((function(e){return e.id===a})))&&void 0!==t?t:null},W=function(e){return e.photos.initial},D=function(e){return e.photos.error},H=y.reducer,L=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.default,padding:e.spacing(2),borderRadius:e.shape.borderRadius},searchButton:{flex:"0 0 auto",margin:"auto",marginLeft:e.spacing(2),minWidth:"0"},startIcon:Object(i.a)({},e.breakpoints.down("sm"),{marginRight:0,marginLeft:0})}}));function M(e){var t=e.className,a=Object(l.a)(e,["className"]),r=L(),o=Object(b.c)(S),c=Object(b.b)(),i=n.useState(o),u=Object(s.a)(i,2),v=u[0],O=u[1],w=n.useCallback((function(e){e.preventDefault(),v.length&&c(function(e){var t=e.value;return function(){var e=Object(x.a)(j.a.mark((function e(a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(y.actions.beginSearch({value:t})),e.prev=1,e.next=4,k({text:t});case 4:n=e.sent,a(y.actions.completeSearch({page:n.page,pageCount:n.pages,photos:n.photo})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(y.actions.fetchFailed({error:"Couldn't load the images - try again?"}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}({value:v}))}),[v,c]),E=Object(p.a)((function(e){return e.breakpoints.down("sm")}));return n.createElement(f.a,Object.assign({component:"form",display:"flex",flexDirection:"row",alignContent:"center",onSubmit:w,className:Object(g.a)(r.root,t)},a),n.createElement(d.a,{value:v,onChange:function(e){return O(e.target.value)},label:"Search photos",variant:"filled",fullWidth:!0}),n.createElement(h.a,{type:"submit",color:"primary",variant:"contained",startIcon:n.createElement(m.a,null),className:r.searchButton,classes:{startIcon:r.startIcon},"aria-label":E?"Search":void 0},E?null:"Search"))}var _,z=a(124),q=a(123),A=a(93),V=a(49);function J(e){var t=e.photo,a=e.format,r=void 0===a?_.Large:a,o=Object(l.a)(e,["photo","format"]),c=n.useMemo((function(){return"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret).concat(r,".jpg")}),[t,r]);return n.createElement(V.a.img,Object.assign({src:c,alt:t.title},o))}!function(e){e.Square="_q",e.Large=""}(_||(_={}));var $=Object(u.a)((function(e){return{root:{position:"relative","&::before":{position:"absolute",top:0,left:0,right:0,bottom:0,content:'""',zIndex:1,boxShadow:"inset 0 0 0 0 ".concat(e.palette.secondary.main),transition:e.transitions.create("box-shadow"),borderRadius:e.shape.borderRadius,pointerEvents:"none"},"&:focus":{"&::before":{boxShadow:"inset 0 0 0 6px ".concat(e.palette.secondary.main)}}},photo:{width:"100%",height:"100%"}}}));function U(e){var t=e.photo,a=e.className,r=$(),o=Object(b.b)(),c=t.id,i=n.useCallback((function(){o(I({id:c}))}),[o,c]);return n.createElement(A.a,{onClick:i,className:Object(g.a)(r.root,a)},n.createElement(J,{photo:t,format:_.Square,className:r.photo,whileHover:{scale:1.1}}))}var G=a(64),K=a.n(G);function Q(e){var t=n.useRef();return n.useEffect((function(){t.current=e}),[e]),t.current}function X(e){var t=e.onVisible,a=e.onHidden,r=Object(l.a)(e,["onVisible","onHidden"]),o=n.useRef(null),c=n.useState(!1),i=Object(s.a)(c,2),u=i[0],p=i[1],f=Q(u);return n.useEffect((function(){!!f!==u&&(u?null===t||void 0===t||t():null===a||void 0===a||a())}),[f,u,a,t]),n.useEffect((function(){if(o.current){var e=o.current,t=new K.a((function(e){p(e[0].isIntersecting)}));return t.observe(e),function(){t.disconnect()}}}),[o]),n.createElement("div",Object.assign({ref:o},r))}var Y=a(122);function Z(){return n.createElement(V.a.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:80},transition:{delay:2}},n.createElement(Y.a,null))}var ee=Object(u.a)((function(e){var t;return{root:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:e.spacing(20)},grid:(t={width:"100%",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridAutoFlow:"row dense",gap:"".concat(e.spacing(2),"px")},Object(i.a)(t,e.breakpoints.up("sm"),{gridTemplateColumns:"repeat(3, 1fr)"}),Object(i.a)(t,e.breakpoints.up("md"),{gridTemplateColumns:"repeat(4, 1fr)"}),Object(i.a)(t,e.breakpoints.up("lg"),{gridTemplateColumns:"repeat(8, 1fr)"}),t),gridItem:{position:"relative",paddingTop:"100%",overflow:"hidden",borderRadius:e.shape.borderRadius,backgroundColor:e.palette.grey[200]},gridItemContents:{position:"absolute",left:0,top:0,width:"100%",height:"100%",objectFit:"cover"}}}));function te(e){var t=e.className,a=e.photos,r=Object(l.a)(e,["className","photos"]),o=ee(),c=Object(b.c)(B),i=Object(b.c)(R),s=Object(b.b)(),u=n.useCallback((function(){s(function(){var e=Object(x.a)(j.a.mark((function e(t,a){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y.actions.beginPageFetch()),n=S(a()),r=F(a()),e.prev=3,e.next=6,k({text:n,page:r+1});case 6:o=e.sent,t(y.actions.completeSearch({page:o.page,pageCount:o.pages,photos:o.photo})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t(y.actions.fetchFailed({error:"Couldn't load the images - try again?"}));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a){return e.apply(this,arguments)}}())}),[s]);return n.createElement("div",Object.assign({className:Object(g.a)(o.root,t)},r),n.createElement("div",{className:o.grid},a.map((function(e){return n.createElement("div",{className:o.gridItem,key:e.id},n.createElement(U,{photo:e,className:o.gridItemContents}))}))),c&&n.createElement(Z,null),!c&&i&&n.createElement(X,{onVisible:u}))}var ae=a(130),ne=Object(u.a)((function(){return{photo:{width:"80vw",height:"auto"}}}));function re(e){var t=e.className,a=ne(),r=Object(b.c)(T),o=Object(b.b)(),c=n.useCallback((function(){o(N())}),[o]);return n.createElement(ae.a,{open:!!r,onClose:c,className:t,maxWidth:!1},!!r&&n.createElement(J,{photo:r,className:a.photo}))}function oe(){return n.createElement(f.a,{display:"flex",flexDirection:"column",alignItems:"center",style:{opacity:.9}},n.createElement("span",{role:"img","aria-label":"wave",style:{fontSize:"10vmin",margin:32}},"\ud83d\udc4b"),n.createElement(q.a,null,"Hi there! Type a search term above to see some photos."))}var ce=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},search:Object(i.a)({alignSelf:"center",position:"sticky",top:e.spacing(2),zIndex:e.zIndex.appBar,width:"100%"},e.breakpoints.up("md"),{width:"50vw"}),list:{marginTop:e.spacing(4)}}}));var ie=function(){var e=ce(),t=Object(b.c)(P),a=Object(b.c)(W),n=Object(b.c)(D);return r.a.createElement(z.a,{maxWidth:"lg",className:e.root},r.a.createElement(M,{className:e.search}),t.length?r.a.createElement(te,{className:e.list,photos:t}):a?r.a.createElement(oe,null):null,n&&r.a.createElement(f.a,{p:4},r.a.createElement(q.a,{color:"error"},n)),r.a.createElement(re,null))},se=Object(w.a)({reducer:{photos:H}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=a(125),ue=a(126),pe=a(65),fe=Object(pe.a)({palette:{text:{primary:"#242432"},background:{default:"#f4f6ff",paper:"#ffffff"},primary:{main:"#ea907a"},secondary:{main:"#4f8a8b"},error:{main:"#ff7171"}},shape:{borderRadius:32},props:{MuiFilledInput:{disableUnderline:!0}},overrides:{MuiFilledInput:{root:{borderRadius:32,padding:"8px 16px"},input:{padding:8}},MuiInputLabel:{filled:{padding:"4px 16px",borderRadius:16,transform:"translate(8px, 12px) scale(1)","&$shrink":{transform:"translate(24px, -8px) scale(0.75)",backgroundColor:"#ffffff"}}}}});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le.a,{theme:fe},r.a.createElement(ue.a,null),r.a.createElement(b.a,{store:se},r.a.createElement(ie,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[76,1,2]]]);
//# sourceMappingURL=main.e890cb77.chunk.js.map